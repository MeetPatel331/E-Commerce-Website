import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { toastErrorMessage } from '../components/RemovingDuplicate'
import { FaArrowRight, FaDatabase, FaUsers } from 'react-icons/fa'
import { IoBag } from 'react-icons/io5'
import { refreshAccess } from '../components/Access'
import CountUp from 'react-countup'
import { useCart } from '../components/CartProvider'

const Overview = () => {
    const [data, setdata] = useState({})
    const {BASE_URL}=useCart()
    useEffect(() => {
        axios.post(`${BASE_URL}/admin/products/overview`, {}, {
            headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${localStorage.getItem('accessToken')}`
            }
        }).then((res) => {
            console.log(res.data)
            setdata(res.data)
        }).catch((err) => {
            if (err.response.data.unauthorized) {
                const { success, accessToken } = refreshAccess()
                if (success && accessToken) {
                    localStorage.setItem('accessToken', accessToken)
                }
                else {
                    navigate('/login')
                }
            }
            toastErrorMessage(err.response.data.message)
            console.log(err)
        })
    }, [])
    return (
        <>
            <h1 className='overviewHeading'>Overview</h1>
            <div className='overview'>
                <div className='overviewBox'>
                    <h1><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50" height="50" viewBox="0 0 100 100">
                        <path d="M31.5,88.2c-3.6,0-6.5-2.9-6.5-6.5c0-1.9,0.4-3.8,1.1-5.5H14.5c-3.6,0-6.5-2.9-6.5-6.5c0-6,3.8-11.4,9.4-13.5l2.8-1.2 c-0.3-0.7-0.5-1.3-0.7-1.9c-1-0.5-2-3.1-2.7-3.9c-3-3.4-4.2-7.8-0.8-11.7c0,0,0.1-0.1,0.1-0.1C14.6,26,21.2,19.9,27.9,18.1 c0.7-0.2,3.4-0.8,6.6-0.8c5.4,0,8.4,1.9,10,3.8c3.5,1.5,6,6.4,7.3,9.7C53.7,25,58.4,19.3,63,18.1c0.7-0.2,3.4-0.8,6.6-0.8 c5.4,0,8.4,1.9,10,3.8c3,1.3,5.3,3.3,6.7,6c1.9,3.5,2,7.4,1.6,10.3c0,0,0.1,0.1,0.1,0.1c3.4,4,2.2,10.1-0.8,13.6 c-0.8,0.9-1.7,1.6-2.7,2.1c-0.2,0.6-0.4,1.3-0.7,1.9l2.9,1.2c5.6,2.1,9.3,7.4,9.3,13.5c0,3.6-2.9,6.5-6.5,6.5H78 c0.6,1.7,1,3.6,1,5.5c0,3.6-2.9,6.5-6.5,6.5H31.5z" opacity=".35"></path><path fill="#f2f2f2" d="M29.5,86.2c-3.6,0-6.5-2.9-6.5-6.5c0-1.9,0.4-3.8,1.1-5.5H12.5c-3.6,0-6.5-2.9-6.5-6.5c0-6,3.8-11.4,9.4-13.5 l2.8-1.2c-0.3-0.7-0.5-1.3-0.7-1.9c-1-0.5-2-1.2-2.7-2.1c-3-3.4-4.2-9.6-0.8-13.6c0,0,0.1-0.1,0.1-0.1C12.6,24,19.2,17.9,25.9,16.1 c0.7-0.2,3.4-0.8,6.6-0.8c5.4,0,8.4,1.9,10,3.8c3.5,1.5,6,4,7.3,7.3c1.9-5.8,6.6-9.1,11.1-10.3c0.7-0.2,3.4-0.8,6.6-0.8 c5.4,0,8.4,1.9,10,3.8c3,1.3,5.3,3.3,6.7,6c1.9,3.5,2,7.4,1.6,10.3c0,0,0.1,0.1,0.1,0.1c3.4,4,2.2,10.1-0.8,13.6 c-0.8,0.9-1.7,1.6-2.7,2.1c-0.2,0.6-0.4,1.3-0.7,1.9l2.9,1.2c5.6,2.1,9.3,7.4,9.3,13.5c0,3.6-2.9,6.5-6.5,6.5H76 c0.6,1.7,1,3.6,1,5.5c0,3.6-2.9,6.5-6.5,6.5H29.5z"></path><path fill="#96c362" d="M65.4,32.8L57,29.6c-0.4,2.9-4.2,6.6-7.2,6.6s-6.4-3.8-6.8-6.6l-8.3,3.2c-3.1,1.1-5.3,4.1-5.3,7.4l0,0h41.2 l0,0C70.6,36.9,68.5,33.9,65.4,32.8z"></path><path fill="#d47f56" d="M48.5,59.8l-10.3-3.4l0.9-4c2.2-1.8,2.6-4.2,3.6-7.4c0.9,0.8,2.3,0.5,3.4-0.8c1.2-1.4,1.5-3.4,0.7-4.5 c-0.6-0.9-1.8-0.9-2.9-0.2c0.3-1.9,0.1-3.7,0.1-5.3C44,27.3,39.2,23,32.9,23s-11.1,4.3-11.1,11.4c0,1.6-0.1,3.4,0.2,5.4 c-0.2-0.9-1.8-0.9-2.4,0.1c-0.8,1.1-0.5,3.1,0.7,4.5c1.2,1.4,2.2,1.6,3.1,0.5c0,0,0,0,0,0c0.7,3.4,1.1,5.7,3.1,7.5l1.2,4.1 l-9.9,3.4c-3.1,1.1-5.3,4.1-5.3,7.4l0,0h41.2l0,0C53.7,63.9,51.6,60.9,48.5,59.8z"></path><path fill="#40396e" d="M33,54.3c2.8,0,5.4-1.9,5.4-1.9s-1.3,4.9-5.4,4.9c-4.1,0-5.7-4.9-5.7-4.9S30.2,54.3,33,54.3z" opacity=".35"></path><path fill="#96c362" d="M48.5,59.8l-9.8-3.2c-0.4,2.9-2.8,5.1-5.8,5.1s-5.4-2.2-5.8-5.1l-9.3,3.2c-3.1,1.1-5.3,4.1-5.3,7.4l0,0h41.2 l0,0C53.7,63.9,51.6,60.9,48.5,59.8z"></path><path fill="#40396e" d="M43.6,47.1c-0.6,0-1.2-0.1-1.5-0.3c-0.8-0.3-1.1-1.2-0.8-2c0.3-0.8,1.2-1.1,1.9-0.8c0.2,0.1,0.8,0.2,1.2-0.3 c0.8-1,1-2.7,0.7-3.1c-0.1-0.1-0.2,0-0.4,0.1c-0.5,0.4-1.2,0.4-1.7,0.1c-0.5-0.3-0.8-0.9-0.7-1.6c0.4-1.9,0.6-3,0.6-4.4 c0-6-4.1-10.2-9.9-10.2c-0.8,0-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5c7.5,0,12.9,5.5,12.9,13.2c0,1-0.1,1.9-0.2,2.8 c0.7,0.1,1.3,0.5,1.7,1c1.5,1.8,0.8,5.2-0.7,7C45.7,46.8,44.5,47.1,43.6,47.1z"></path><path fill="#40396e" d="M53.7,69.2c-0.8,0-1.5-0.7-1.5-1.5c0-2.7-1.7-5.1-4.3-6c-0.1-0.1-0.3-0.1-0.4-0.2L40,55.7 c-0.7-0.5-0.8-1.4-0.3-2.1c0.5-0.7,1.4-0.8,2.1-0.3l7.3,5.6c3.6,1.4,6,4.9,6,8.8C55.2,68.6,54.5,69.2,53.7,69.2z"></path><path fill="#40396e" d="M45.5,69.2h-33c-0.8,0-1.5-0.7-1.5-1.5c0-4,2.5-7.5,6.3-8.8l7.8-3.3v-1.3c-2.4-2.6-3.1-5.4-3.3-7.1 c-1.1,0-2.3-0.4-3.2-1.4c-1.6-1.8-2.2-5.3-0.7-7c0.4-0.5,1.3-1,2.3-1.1c-0.1-0.9-0.2-1.8-0.2-2.8c0-7.6,5.4-13.2,12.9-13.2 c0.8,0,1.5,0.7,1.5,1.5s-0.7,1.5-1.5,1.5c-5.9,0-9.9,4.2-9.9,10.2c0,1.4,0.2,2.6,0.6,4.4c0.1,0.6-0.2,1.2-0.7,1.6 c-0.5,0.3-1.2,0.3-1.7-0.1c-0.3-0.2-0.8-0.1-1,0c-0.2,0.5,0,2.1,0.8,3c0.5,0.5,1.7,0.3,2,0.2c0.3-0.1,0.7-0.1,1,0 c0.6,0.2,1,0.9,1,1.5c0,0.2-0.3,3.8,2.9,7c0.3,0.3,0.4,0.7,0.4,1.1v2.9c0,0.6-0.4,1.1-0.9,1.4l-8.8,3.7c-2.1,0.8-3.7,2.5-4.2,4.5 h31.3c0.8,0,1.5,0.7,1.5,1.5S46.3,69.2,45.5,69.2z"></path><path fill="#40396e" d="M27.2,30.2c3.3,0,8.4,0,11.6,0c1.6,0,2.9,1.2,3.1,2.7c0.7,5.8,1.2,7.3,1.2,7.3h3.4c0-0.1-0.1-0.1-0.1-0.2 C46,39.6,45,39.1,43.9,40c0.4-1.9,0.5-3.2,0.5-4.8c0-7.1-5.1-11.7-11.5-11.7s-11.5,4.6-11.5,11.7c0,1.6,0.2,2.8,0.5,4.8 c-1.1-0.8-2.1-0.4-2.4,0.1c0,0.1-0.1,0.1-0.1,0.2l4.1-0.4c0,0,0.2-1,0.9-6.8C24.6,31.4,25.6,30.2,27.2,30.2z"></path><path fill="#40396e" d="M19.9,38.3c0,0,1.3-1.7,2.6-2c0,0,16-1,17.2-9.1c1.4-8.7-9.5-7.1-12.5-6.3C24.5,21.7,16.1,25.1,19.9,38.3z"></path><path fill="#40396e" d="M38.5,28.7c0,0-0.2,2.3,4,7.6l2.5,2.1c0,0,4.5-12.1-5.8-15.1L38.5,28.7z"></path><path fill="#ffb789" d="M51.5,59.8l10.3-3.4l-0.9-4c-2.2-1.8-2.6-4.2-3.6-7.4c-0.9,0.8-2.3,0.5-3.4-0.8c-1.2-1.4-1.5-3.4-0.7-4.5 c0.6-0.9,1.8-0.9,2.9-0.2c-0.3-1.9-0.1-3.7-0.1-5.3c0-7.1,4.8-11.4,11.1-11.4s11.1,4.3,11.1,11.4c0,1.6,0.1,3.4-0.2,5.4 c0.2-0.9,1.8-0.9,2.4,0.1c0.8,1.1,0.5,3.1-0.7,4.5c-1.2,1.4-2.2,1.6-3.1,0.5c0,0,0,0,0,0c-0.7,3.4-1.1,5.7-3.1,7.5l-1.2,4.1 l9.9,3.4c3.1,1.1,5.3,4.1,5.3,7.4l0,0H46.3l0,0C46.3,63.9,48.4,60.9,51.5,59.8z"></path><path fill="#40396e" d="M67,54.3c-2.8,0-5.4-1.9-5.4-1.9s1.3,4.9,5.4,4.9c4.1,0,5.7-4.9,5.7-4.9S69.8,54.3,67,54.3z" opacity=".35"></path><path fill="#ff7575" d="M51.5,59.8l9.8-3.2c0.4,2.9,2.8,5.1,5.8,5.1c3,0,5.4-2.2,5.8-5.1l9.3,3.2c3.1,1.1,5.3,4.1,5.3,7.4l0,0H46.3 l0,0C46.3,63.9,48.4,60.9,51.5,59.8z"></path><path fill="#40396e" d="M56.4,47.1c-1,0-2.1-0.3-3.1-1.4c-1.6-1.8-2.2-5.3-0.7-7c0.4-0.5,1-0.9,1.7-1c-0.1-1-0.2-1.8-0.2-2.8 c0-7.6,5.4-13.2,12.9-13.2c0.8,0,1.5,0.7,1.5,1.5s-0.7,1.5-1.5,1.5c-5.9,0-9.9,4.2-9.9,10.2c0,1.4,0.2,2.6,0.6,4.4 c0.1,0.6-0.2,1.2-0.7,1.6s-1.2,0.3-1.7-0.1c-0.2-0.1-0.3-0.2-0.4-0.1c-0.3,0.4-0.1,2.1,0.7,3.1c0.5,0.5,1.1,0.3,1.3,0.3 c0.8-0.3,1.6,0.1,1.9,0.9c0.3,0.8-0.1,1.6-0.8,1.9C57.6,47,57,47.1,56.4,47.1z"></path><path fill="#40396e" d="M46.3,69.2c-0.8,0-1.5-0.7-1.5-1.5c0-3.9,2.4-7.4,6-8.8l7.3-5.6c0.7-0.5,1.6-0.4,2.1,0.3 c0.5,0.7,0.4,1.6-0.3,2.1l-7.5,5.8c-0.1,0.1-0.3,0.2-0.4,0.2c-2.5,0.9-4.3,3.3-4.3,6C47.8,68.6,47.1,69.2,46.3,69.2z"></path><path fill="#40396e" d="M87.5,69.2h-33c-0.8,0-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5h31.3c-0.5-2.1-2-3.8-4.1-4.5L72.9,58 c-0.6-0.2-0.9-0.8-0.9-1.4v-2.9c0-0.4,0.2-0.8,0.4-1.1c3.2-3.2,2.9-6.9,2.9-7c-0.1-0.7,0.3-1.3,1-1.5c0.3-0.1,0.6-0.1,1,0 c0.3,0.1,1.5,0.3,2-0.2c0.8-0.9,1-2.5,0.8-3c-0.2-0.1-0.8-0.2-1,0c-0.5,0.4-1.2,0.4-1.7,0.1c-0.5-0.3-0.8-0.9-0.7-1.6 c0.4-1.9,0.6-3,0.6-4.4c0-6-4.1-10.2-9.9-10.2c-0.8,0-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5c7.5,0,12.9,5.5,12.9,13.2 c0,1-0.1,1.9-0.2,2.8c1,0.1,1.9,0.5,2.3,1.1c1.5,1.8,0.8,5.2-0.7,7c-0.9,1-2.1,1.3-3.2,1.4c-0.2,1.8-0.9,4.6-3.3,7.1v1.3l7.9,3.3 c3.7,1.3,6.2,4.8,6.2,8.8C89,68.6,88.3,69.2,87.5,69.2z M80,40.8L80,40.8L80,40.8z"></path><path fill="#40396e" d="M73,28.9c-3.3,0-8.5,1.4-11.8,1.4c-1.6,0-2.9,1.2-3.1,2.7c-0.7,5.8-1.2,7.3-1.2,7.3h-3.4 c0-0.1,0.1-0.1,0.1-0.2c0.4-0.4,1.3-0.9,2.4-0.1c-0.4-1.9-0.5-3.2-0.5-4.8c0-7.1,5.1-11.7,11.5-11.7s11.5,4.6,11.5,11.7 c0,1.6-0.2,2.8-0.5,4.8c1.1-0.8,2.1-0.4,2.4,0.1c0,0.1,0.1,0.1,0.1,0.2l-4.1-0.5c0,0-0.3-0.9-1-6.8C75.3,31.4,74.6,28.9,73,28.9z"></path><path fill="#40396e" d="M54.9,38.3c0,0,1.3-1.7,2.6-2c0,0,16-1,17.2-9.1c1.4-8.7-9.5-7.1-12.5-6.3C59.6,21.7,51.2,25.1,54.9,38.3z"></path><path fill="#40396e" d="M73.6,28.7c0,0-0.2,2.3,4,7.6l2.5,2.1c0,0,4.5-12.1-5.8-15.1L73.6,28.7z"></path><g><path fill="#ffd8bf" d="M65.6,72l-9.8-3.2l-0.2-4.1c2.2-1.8,3.1-4.6,4.1-7.8c0.9,1.3,1.9,0.9,2.7-0.5c0.9-1.6,1.3-3.8,0.5-4.8 c-0.7-0.9-1.4-0.7-1.9,0.1c0.3-1.9,0.1-3.7,0.1-5.2c0-7.1-4.8-11.4-11.1-11.4s-11.1,4.3-11.1,11.4c0,1.6-0.1,3.4,0.2,5.4 c-0.2-0.9-1.2-1.2-1.9-0.3c-0.8,1.1-0.5,3.3,0.4,4.8c0.8,1.4,2,1.6,2.8,0.5c0,0,0,0,0,0c0.7,3.4,2,5.9,3.9,7.7L44.2,69l-9.8,3 c-3.1,1.1-4.8,4.1-4.8,7.4l0,0l40.8,0l0,0C70.3,76.1,68.7,73.1,65.6,72z"></path><path fill="#40396e" d="M50.1,66.3c2.8,0,5.4-1.5,5.4-1.5s-1.3,3.9-5.4,3.9c-4.1,0-5.7-3.9-5.7-3.9S47.3,66.3,50.1,66.3z" opacity=".35"></path><path fill="#70bfff" d="M65.6,72l-9.8-3.2c-0.4,2.9-2.8,5.1-5.8,5.1c-3,0-5.4-2.2-5.8-5.1L34.4,72c-3.1,1.1-4.8,4.1-4.8,7.4l0,0 l40.8,0l0,0C70.3,76.1,68.7,73.1,65.6,72z"></path><path fill="#40396e" d="M70.5,81.2h-41c-0.8,0-1.5-0.7-1.5-1.5c0-3.8,2.2-7.2,5.9-9l9-4.6l1.4,2.7l-9,4.6c-2.1,1-3.5,2.8-4,4.8h37.7 c-0.4-2.3-1.8-4-3.7-4.7c-0.1,0-0.1,0-0.2-0.1l-9.2-4.6l1.4-2.7l9.1,4.6c3.5,1.3,5.8,4.8,5.8,9C72,80.6,71.3,81.2,70.5,81.2z"></path><path fill="#40396e" d="M44.2,41.7c3.2,0,8.4,0,11.6,0c1.6,0,2.3,1.4,2.4,3.1c0.7,5.6,1,7.2,1,7.2s1.5-0.6,1.7-0.5 c0.4-1.9,0.5-3.2,0.5-4.8c0-7.1-5.1-11.7-11.4-11.7s-11.4,4.6-11.4,11.7c0,1.6,0.3,3.4,0.6,5.3c0.8-0.8,1.6,0,1.6,0 s0.4-1.7,1-7.5C42.1,42.9,42.6,41.7,44.2,41.7z"></path><path fill="#40396e" d="M39.1,52c0,0,0.5-3.3,0.9-4.1c0,0,15.6-1,16.8-8.9c1.3-8.6-9.2-7-12.2-6.2C42,33.6,34.1,39,39.1,52z"></path><path fill="#40396e" d="M55.6,40.8c0,0-0.6,3.2,3.9,8.3l1.5,2.9c0,0,6.2-13.6-4.6-16.4L55.6,40.8z"></path></g><g><circle cx="40" cy="51.9" r=".9" fill="#40396e"></circle></g><g><circle cx="60.2" cy="51.9" r=".9" fill="#40396e"></circle></g><g><polygon fill="#40396e" points="44.2,68.8 44.2,68 43.5,67.9 43.5,68.6"></polygon></g><g><polygon fill="#40396e" points="55.8,68.2 55.8,68.8 56.3,68.1"></polygon></g><g><rect width="2" height="2" x="41" y="64.2" fill="#96c362"></rect></g><g><rect width="2" height="1" x="56" y="65.2" fill="#ff7575"></rect></g>
                    </svg></h1>
                    <h2><CountUp
                        start={0}
                        end={data.users}
                        duration={2}
                    />&nbsp;Users </h2>
                </div>
                <div className='overviewBox'>
                    <h1>{<FaDatabase />}</h1>
                    <h2><CountUp
                        start={0}
                        end={data.products}
                        duration={2}
                    />&nbsp;Products </h2>
                </div>
                <div className='overviewBox'>
                    <h1>{<IoBag />}</h1>
                    <h2><CountUp
                        start={0}
                        end={data.orders}
                        duration={2}
                    />&nbsp;Orders </h2>
                </div>
            </div></>
    )
}

export default Overview